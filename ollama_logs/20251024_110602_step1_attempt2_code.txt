# STEP 1 – Choose resume method, upload PDF and click Continue
from selenium.common.exceptions import NoSuchElementException, TimeoutException, ElementNotInteractableException

try:
    # 1️⃣ Click the "From Device" method button to reveal the file upload field
    file_method_btn = WebDriverWait(driver, 15).until(
        EC.element_to_be_clickable((By.ID, "methodButton--file"))
    )
    print("Clicking 'From Device' method button")
    file_method_btn.click()
except (TimeoutException, NoSuchElementException, ElementNotInteractableException) as e:
    print(f"Unable to click 'From Device' method button: {e}")

# 2️⃣ Upload the resume PDF
try:
    # The <input type="file"> is hidden but we can still send_keys to it
    resume_input = WebDriverWait(driver, 15).until(
        EC.presence_of_element_located((By.ID, "resumeFile"))
    )
    print(f"Uploading resume PDF from path: {resume_pdf_path}")
    resume_input.send_keys(resume_pdf_path)
except (TimeoutException, NoSuchElementException, ElementNotInteractableException) as e:
    print(f"Failed to locate or interact with resume file input: {e}")

# 3️⃣ Click the "Continue" button to move to the next step
try:
    continue_btn = WebDriverWait(driver, 15).until(
        EC.element_to_be_clickable((By.ID, "uploadFileResume"))
    )
    print("Clicking 'Continue' to proceed to the next step")
    continue_btn.click()
except (TimeoutException, NoSuchElementException, ElementNotInteractableException) as e:
    print(f"Unable to click 'Continue' button: {e}")

# Optional: verify that we have moved to the next step (e.g., Personal Information section appears)
try:
    # Wait for a known element of the next step – e.g., first name field if it exists
    # Adjust the locator as needed for the actual next-step form
    WebDriverWait(driver, 10).until(
        EC.visibility_of_element_located((By.NAME, "username"))
    )
    print("Successfully navigated to the next step (Personal Information).")
except Exception:
    print("Next step not detected – you may need to adjust the verification logic.")