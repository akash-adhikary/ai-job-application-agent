wait = WebDriverWait(driver, 15)

clicked = False
try:
    # Locate the label containing the exact consent text and click it (works for both <label> wrapped around <input> or separate)
    consent_label = wait.until(
        EC.element_to_be_clickable(
            (By.XPATH, "//label[contains(normalize-space(.), 'Yes, I have read and consent to the terms and conditions')]")
        )
    )
    driver.execute_script("arguments[0].scrollIntoView({block: 'center'});", consent_label)
    time.sleep(1)
    driver.execute_script("arguments[0].click();", consent_label)
    print("✓ Clicked consent checkbox via label")
    clicked = True
except Exception as e_label:
    print(f"✗ Could not click via label: {e_label}")

if not clicked:
    try:
        # Fallback: locate the checkbox input directly adjacent to the label text
        consent_checkbox = wait.until(
            EC.element_to_be_clickable(
                (By.XPATH, "//input[@type='checkbox' and @aria-label='Yes, I have read and consent to the terms and conditions' or @value='Yes, I have read and consent to the terms and conditions' or following-sibling::text()[contains(.,'Yes, I have read and consent to the terms and conditions')]]")
            )
        )
        driver.execute_script("arguments[0].scrollIntoView({block: 'center'});", consent_checkbox)
        time.sleep(1)
        driver.execute_script("arguments[0].click();", consent_checkbox)
        print("✓ Clicked consent checkbox via input")
        clicked = True
    except Exception as e_input:
        print(f"✗ Could not click via input: {e_input}")

if not clicked:
    print("✗ Failed to locate and click the consent checkbox.")