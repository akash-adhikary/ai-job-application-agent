# Fill Email and Password fields
try:
    email_elem = wait.until(EC.visibility_of_element_located((By.ID, "input-4")))
    driver.execute_script("arguments[0].scrollIntoView(true);", email_elem)
    email_elem.clear()
    email_elem.send_keys(EMAIL)

    password_elem = wait.until(EC.visibility_of_element_located((By.ID, "input-5")))
    driver.execute_script("arguments[0].scrollIntoView(true);", password_elem)
    password_elem.clear()
    password_elem.send_keys(PASSWORD)

    print("Login fields filled successfully")
except Exception as e:
    print("Error filling login fields:", e)

# Click the Sign In button in the login modal
try:
    sign_in_btn = wait.until(EC.element_to_be_clickable(
        (By.XPATH, "//button[normalize-space(text())='Sign In' and contains(@class, 'css-1pluuwy')]")
    ))
    driver.execute_script("arguments[0].scrollIntoView(true);", sign_in_btn)
    sign_in_btn.click()
    print("Sign In button clicked")
except Exception as e:
    print("Error clicking Sign In button:", e)

# Wait for URL to change after login
try:
    old_url = driver.current_url
    wait.until(lambda d: d.current_url != old_url)
    print("URL changed after login")
except Exception as e:
    print("URL did not change:", e)