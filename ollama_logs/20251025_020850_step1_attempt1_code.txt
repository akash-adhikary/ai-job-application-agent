from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.common.exceptions import (
    NoSuchElementException,
    ElementClickInterceptedException,
    TimeoutException,
)

wait = WebDriverWait(driver, 15)

def click_accept_cookies():
    try:
        # Wait for the button to be clickable (by text or class)
        accept_btn = wait.until(
            EC.element_to_be_clickable(
                (By.XPATH, "//button[contains(@class, 'css-1pnd5en') and normalize-space()='Accept Cookies']")
            )
        )
        driver.execute_script("arguments[0].scrollIntoView({block: 'center'});", accept_btn)
        time.sleep(0.5)
        try:
            accept_btn.click()
            print("✓ Clicked Accept Cookies (normal click)")
        except ElementClickInterceptedException:
            driver.execute_script("arguments[0].click();", accept_btn)
            print("✓ Clicked Accept Cookies (JS click)")
        time.sleep(1)
    except TimeoutException:
        print("⚠️ Accept Cookies button not found or not clickable.")
    except Exception as e:
        print(f"✗ Unexpected error while clicking Accept Cookies: {e}")

click_accept_cookies()