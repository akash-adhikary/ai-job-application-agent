from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import time

wait = WebDriverWait(driver, 15)

# -------- Accept cookies if present ----------
try:
    cookie_btn = wait.until(EC.element_to_be_clickable((By.XPATH, "//button[contains(text(),'Accept')]")))
    driver.execute_script("arguments[0].scrollIntoView({block:'center'});", cookie_btn)
    driver.execute_script("arguments[0].click();", cookie_btn)
    print("✓ Accepted cookies")
except Exception:
    pass  # No cookie banner

# -------- Fill Email Address ----------
try:
    email_input = wait.until(EC.presence_of_element_located((By.ID, "input-280")))
    driver.execute_script("arguments[0].scrollIntoView({block:'center'});", email_input)
    email_input.clear()
    email_input.send_keys("akash.adhikary@hotmail.com")
    print("✓ Filled Email Address")
except Exception as e:
    print(f"✗ Could not fill Email Address: {e}")

# -------- Fill Password ----------
try:
    pwd_input = wait.until(EC.presence_of_element_located((By.ID, "input-281")))
    driver.execute_script("arguments[0].scrollIntoView({block:'center'});", pwd_input)
    pwd_input.clear()
    pwd_input.send_keys("Hinjewadi@123")
    print("✓ Filled Password")
except Exception as e:
    print(f"✗ Could not fill Password: {e}")

# -------- Click Sign In button within login form ----------
try:
    # Locate the Sign In button that is inside the same form as the inputs
    sign_in_btn = wait.until(EC.element_to_be_clickable((
        By.XPATH,
        "//form//*[contains(text(),'Sign In') and (self::button or self::input[@type='submit'])]"
    )))
    driver.execute_script("arguments[0].scrollIntoView({block:'center'});", sign_in_btn)
    time.sleep(1)
    driver.execute_script("arguments[0].click();", sign_in_btn)
    print("✓ Clicked Sign In button")
except Exception as e:
    print(f"✗ Could not click Sign In button: {e}")

time.sleep(2)  # allow login processing to start